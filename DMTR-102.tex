\documentclass[DM,lsstdraft,STR,toc]{lsstdoc}
\usepackage{geometry}
\usepackage{longtable,booktabs}

\input meta.tex

\begin{document}

\def\milestoneName{Raw Image Archiving}
\def\milestoneId{LDM-503-8b}
\def\product{LSST Raw Image Archiving System}

\setDocCompact{true}

\title[\milestoneId{}~Test Report]{\milestoneId{} (\milestoneName{})~Test Plan and Report}
\setDocRef{\lsstDocType-\lsstDocNum}
\setDocDate{\vcsdate}
\setDocUpstreamLocation{\url{https://github.com/lsst/lsst-texmf/examples}}
\author{% `git log --pretty=%an | sort --key=2 | uniq` ?
  Michelle Butler
}

% Most recent last
\setDocChangeRecord{
\addtohist{}{2018-10-31}{Test plan Update}{Butler, Comoretto}
\addtohist{}{2018-10-10}{Initial version.}{Butler, Comoretto}
}

\setDocCurator{Michelle Butler}
\setDocUpstreamLocation{\url{https://github.com/lsst-dm/\lsstDocType-\lsstDocNum}}
\setDocUpstreamVersion{\vcsrevision}


\setDocAbstract{
This is the test plan and report for \milestoneId{} (\milestoneName{}), an LSST DM level 1 milestone pertaining to the \product{}.
}

\maketitle

\section{Introduction}
\label{sect:intro}


\subsection{Objectives}
\label{sect:objectives}

Testing for the raw image from the DAQ to being written to the archive service at the LDF
This test activity demonstrates the successful execution of the major components of the storing of raw image files from the DAQ to the DBB and then visualized through the LSST science platform (LSP).   This is at a very small scale and it to test the components of a proof of concept that they all work together.  

It will demonstrate
\begin{itemize}
\item Data can be transferred into the lsst data facility (LDF).   
\item The raw data images can be ingested by the DBB along with some metadata about the image and providence.  
\item The data files  can then be retrieved by the LSP
\end{itemize}

\subsection{Scope}
\label{sect:scope}

The overall test plan for the LSST Data Management system is described in LDM-503.
This document specifically refers to the milestone LDM-503-8b, which tests the raw image archiving for a CCOB device.  

This plan is identified in JIRA as LVV-P10. The related test run is ?? that forsee the data ingestion from the CCOB.  
??  name of test LVV-T**
 
** special note at the time of this plan, the data from the CCOB has not arrived at LDF yet, so a this test can not be executed yet.  

\subsection{System Overview}
\label{sect:systemoverview}

The raw image archiving system that is part of the LSST Data Management system is responsible for the data being stored into the archive environment at the LDF from various sources.  It will depend on what DAQ system (spectragraph, comcam, lsstcam, CCOB... others) as to where the data is located originally, and then how it will be sent to NCSA (LDF) .    The tests begin with data somewhere that needs to be stored at the archive enviornment at LDF and ingested into the DBB.   The LDM-503-5 milestone is limited to the raw image archive from a CCOB device, not all types of devices and is limited in scope.  

\subsection{Applicable Documents}
\label{sect:appdocs}
\addtocounter{table}{-1}

\begin{tabular}[htb]{l l}
\citeds{LDM-294} & LSST DM Project Management Plan\\
\citeds{LDM-503} & DM Test Plan\\
\citeds{LDM-538} & DM Raw Image Archiving Service Test Specification \\
\end{tabular}

The information contained in this document is autogenerated from Jira.
The following Jira test plan and test cycle(s) are used to collect
such information:

\begin{itemize}
\item Test Plan: \href{https://jira.lsstcorp.org/secure/Tests.jspa\#/testPlan/LVV-P10}{LVV-P10} 503-8b raw image archiving for data from CCOB device 
\item Test Cycle: \href{https://jira.lsstcorp.org/secure/Tests.jspa\#/testCycle/LVV-C8}{LVV-C8} 503-8b raw image archiving for CCOB cycle
\end{itemize}

 
\subsection{References}
\label{sect:references}

\renewcommand{\refname}{}
\bibliography{lsst,refs,books,refs_ads}

\subsection{Document Overview}
\label{sect:docoverview}

The following planning sections are completed before the start of the test activity.
Section \ref{sect:configuration} of this document provides details of the \product{} baseline used for this test, including relevant hardware and software configurations.
Section \ref{sect:personnel} lists the individuals involved in performing the tests.
Section \ref{sect:plannedtestactivities} provides a descriptive list of planned test cases.
Once the above sections are completed, this document can be reviewd in order to ensure that the test activity can start.

Section \ref{sect:testresults} is filled after the test activity is completed. 
Its includes  an overview of the resulta in \ref{sect:overview}
while \ref{sect:detailedtestresults} provides more detailed results from each individual test case.

\section{Test Configuration}
\label{sect:configuration}

\subsection{Documents}

{\it
This test plan and report refers to the execution of test activity described in the section \ref{sect:objectives} and documented in the \citeds{LDM-538} test specification issue 2.0.
}

\subsection{Hardware}
\label{sect:hwconf}

LDF center at NCSA.   The archive service or data back bone.

\subsection{Software}
\label{sect:swconf}

\subsection{Entry Criteria}

Data that needs to be stored from a CCOB or DAQ.

\subsection{Exit Criteria}

Data is transferred in proper form and can be viewed on LSP after being transferred to LDF and ingested into DBB.  


\section{Personnel}
\label{sect:personnel}

Following personnel is involved in the test activity:

\begin{itemize}
\item Test Plan (LVV-P10) Owner: Michelle Butler
\item Test Cycle (LVV-C8) Owner: Unassigned
\item LVV-T284 Tester: Michelle Butler
\item Additional Test Personel involved: None 
\end{itemize}

\newpage


\section{Planned Test Activities}
\label{sect:plannedtestactivities}

\subsection{Test Cycle LVV-C8}

Test cycle for the raw image archiving of data from a CCOB device.  This data needs to be stored at the LDF and ingested so that it can be looked at by scientists.   The data needs to be transferred to the LDF and then ingested into the archive service so that it can be retrieved through a butler to be displayed for further use.   This should be tested with a human involved at first for moving the data and making sure all the pieces work.   It should also be tested for when things are working more as a service, and without a human involved for an automatic data archive process.   

\subsubsection{LVV-T284: Writing data from CCOB to the DBB for further data processing}

This test will check:
The successful integration of the Pathfinder components with the CCOB;
That the file can then be ingested into the DBB and be retrieved for further analysis;

    \begin{longtable}[]{p{1.3cm}p{2cm}p{13cm}}
    %\toprule
    Step & \multicolumn{2}{@{}l}{Description} \\ \toprule
    \endhead

            \multirow{1}{*}{ 1 } &  &
            \begin{minipage}[t]{13cm}{\footnotesize
            CCOB device directs a human to where a file is wanted to be stored in
the DBB

            \vspace{\dp0}
            } \end{minipage} \\ \cline{2-3}

            \multirow{1}{*}{ 2 } &  &
            \begin{minipage}[t]{13cm}{\footnotesize
            Transfer the file to the DBB ingest area

            \vspace{\dp0}
            } \end{minipage} \\ \cline{2-3}
        \\ \midrule
    \end{longtable}



\newpage

\section{Test Results}
\label{sect:testresults}

\subsection{Overview of the Test Results}
\label{sect:overview}

\subsubsection{Summary Table}
\label{sect:summarytable}


\begin{longtable} {|p{0.2\textwidth}|p{0.2\textwidth}|p{0.6\textwidth}|}
\hline
{\bf TEST CASE ID} & {\bf PASS/FAIL} & {\bf COMMENTS} \\\hline
LVV-T284 & Not Run & \\\hline
\end{longtable}

\subsubsection{Overall Assessment}
\label{sect:overallassessment}


\subsubsection{Recommended Improvements}
\label{sect:recommendations}

\subsection{Detailed Test Results}
\label{sect:detailedtestresults}

\end{document}
